{"ast":null,"code":"import { useState, useCallback, useEffect } from 'react';\nexport const useAuth = () => {\n  const [username, setUsername] = useState();\n  const [token, setToken] = useState(false);\n  const [userId, setUserId] = useState();\n  const login = useCallback((uid, token, expirationDate, name) => {\n    console.log(uid);\n    setUsername(name);\n    setUserId(uid);\n    setToken(token);\n    const tokenExpirationDate = expirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\n    localStorage.setItem('userData', JSON.stringify({\n      userId: uid,\n      token,\n      expiration: tokenExpirationDate.toString(),\n      name\n    }));\n  }, []);\n  const logout = useCallback(() => {\n    setToken(null);\n    setUserId(null);\n    setUsername(null);\n    localStorage.removeItem('userData');\n  }, []);\n  useEffect(() => {\n    const storedData = JSON.parse(localStorage.getItem('userData'));\n\n    if (storedData && storedData.token && new Date(storedData.expiration) > new Date()) {\n      login(storedData.userId, storedData.token, new Date(storedData.expiration), storedData.name);\n    }\n  }, [login]);\n  return {\n    token,\n    login,\n    logout,\n    userId,\n    username\n  };\n};","map":{"version":3,"sources":["/home/abdo/Documents/MERN/Traveler-app/frontend/src/shared/hooks/auth-hook.js"],"names":["useState","useCallback","useEffect","useAuth","username","setUsername","token","setToken","userId","setUserId","login","uid","expirationDate","name","console","log","tokenExpirationDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toString","logout","removeItem","storedData","parse","getItem"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,WAAnB,EAAgCC,SAAhC,QAAiD,OAAjD;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;AAC1B,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,EAAxC;AACA,QAAM,CAACM,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACQ,MAAD,EAASC,SAAT,IAAsBT,QAAQ,EAApC;AAEA,QAAMU,KAAK,GAAGT,WAAW,CAAC,CAACU,GAAD,EAAML,KAAN,EAAaM,cAAb,EAA6BC,IAA7B,KAAsC;AAC7DC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACAN,IAAAA,WAAW,CAACQ,IAAD,CAAX;AACAJ,IAAAA,SAAS,CAACE,GAAD,CAAT;AACAJ,IAAAA,QAAQ,CAACD,KAAD,CAAR;AACA,UAAMU,mBAAmB,GACtBJ,cAAc,IAAI,IAAIK,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,OAAX,KAAuB,OAAO,EAAP,GAAY,EAA5C,CADrB;AAEAC,IAAAA,YAAY,CAACC,OAAb,CACG,UADH,EAEGC,IAAI,CAACC,SAAL,CAAe;AACZd,MAAAA,MAAM,EAAEG,GADI;AAEZL,MAAAA,KAFY;AAGZiB,MAAAA,UAAU,EAAEP,mBAAmB,CAACQ,QAApB,EAHA;AAIZX,MAAAA;AAJY,KAAf,CAFH;AASF,GAhBwB,EAgBtB,EAhBsB,CAAzB;AAkBA,QAAMY,MAAM,GAAGxB,WAAW,CAAC,MAAM;AAC9BM,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAE,IAAAA,SAAS,CAAC,IAAD,CAAT;AACAJ,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAc,IAAAA,YAAY,CAACO,UAAb,CAAwB,UAAxB;AACF,GALyB,EAKvB,EALuB,CAA1B;AAOAxB,EAAAA,SAAS,CAAC,MAAM;AACb,UAAMyB,UAAU,GAAGN,IAAI,CAACO,KAAL,CAAWT,YAAY,CAACU,OAAb,CAAqB,UAArB,CAAX,CAAnB;;AACA,QACGF,UAAU,IACVA,UAAU,CAACrB,KADX,IAEA,IAAIW,IAAJ,CAASU,UAAU,CAACJ,UAApB,IAAkC,IAAIN,IAAJ,EAHrC,EAIE;AACCP,MAAAA,KAAK,CACFiB,UAAU,CAACnB,MADT,EAEFmB,UAAU,CAACrB,KAFT,EAGF,IAAIW,IAAJ,CAASU,UAAU,CAACJ,UAApB,CAHE,EAIFI,UAAU,CAACd,IAJT,CAAL;AAMF;AACH,GAdQ,EAcN,CAACH,KAAD,CAdM,CAAT;AAeA,SAAO;AAAEJ,IAAAA,KAAF;AAASI,IAAAA,KAAT;AAAgBe,IAAAA,MAAhB;AAAwBjB,IAAAA,MAAxB;AAAgCJ,IAAAA;AAAhC,GAAP;AACF,CA9CM","sourcesContent":["import { useState, useCallback, useEffect } from 'react';\n\nexport const useAuth = () => {\n   const [username, setUsername] = useState();\n   const [token, setToken] = useState(false);\n   const [userId, setUserId] = useState();\n\n   const login = useCallback((uid, token, expirationDate, name) => {\n      console.log(uid);\n      setUsername(name);\n      setUserId(uid);\n      setToken(token);\n      const tokenExpirationDate =\n         expirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\n      localStorage.setItem(\n         'userData',\n         JSON.stringify({\n            userId: uid,\n            token,\n            expiration: tokenExpirationDate.toString(),\n            name,\n         })\n      );\n   }, []);\n\n   const logout = useCallback(() => {\n      setToken(null);\n      setUserId(null);\n      setUsername(null);\n      localStorage.removeItem('userData');\n   }, []);\n\n   useEffect(() => {\n      const storedData = JSON.parse(localStorage.getItem('userData'));\n      if (\n         storedData &&\n         storedData.token &&\n         new Date(storedData.expiration) > new Date()\n      ) {\n         login(\n            storedData.userId,\n            storedData.token,\n            new Date(storedData.expiration),\n            storedData.name\n         );\n      }\n   }, [login]);\n   return { token, login, logout, userId, username };\n};\n"]},"metadata":{},"sourceType":"module"}